import{S as a,i as s,s as t,e,k as r,t as o,j as n,a0 as c,c as d,d as i,n as l,a as m,g as u,m as p,b as f,L as h,E as v,f as w,o as $,F as g,G as b,v as E,r as y,w as P,J as k,a4 as j}from"../../../chunks/vendor-d0121766.js";import{a as S,n as x}from"../../../chunks/notificationStore-a4963416.js";import{T as M,a as R}from"../../../chunks/validation-b785224a.js";import{p as T}from"../../../chunks/stores-57470c1d.js";import{g as A}from"../../../chunks/navigation-20968cc5.js";import"../../../chunks/variables-adc57dbe.js";import"../../../chunks/singletons-bb9012b7.js";const{document:D}=j;function I(a){let s,t,k,j,S,x,R,T,A,I,O,N,W,L,U,V,B,C,F,H,G,J,q,z,K,Q,X,Y,Z;return V=new M({props:{id:"password",label:"Password",type:"password",valid:a[2],validityMessage:"Please enter a valid password.",value:a[0]}}),V.$on("input",a[6]),C=new M({props:{id:"passwordConfirmation",label:"Password Confirmation",type:"password",valid:a[3],validityMessage:"Passwords did not match",value:a[1]}}),C.$on("input",a[7]),{c(){s=e("meta"),t=r(),k=e("main"),j=e("div"),S=e("div"),x=e("div"),R=e("form"),T=e("h2"),A=o("NEW PASSWORD"),I=r(),O=e("p"),N=o("Enter your new password below"),W=r(),L=e("hr"),U=r(),n(V.$$.fragment),B=r(),n(C.$$.fragment),F=r(),H=e("p"),G=e("small"),J=o("Password minimum length 8, must have 1 capital letter, 1 number and 1 special\n\t\t\t\t\t\t\t\tcharacter"),q=r(),z=e("button"),K=o("Update Password"),this.h()},l(a){const e=c('[data-svelte="svelte-1vtjl5"]',D.head);s=d(e,"META",{name:!0,content:!0}),e.forEach(i),t=l(a),k=d(a,"MAIN",{class:!0});var r=m(k);j=d(r,"DIV",{class:!0});var o=m(j);S=d(o,"DIV",{class:!0,style:!0});var n=m(S);x=d(n,"DIV",{class:!0});var f=m(x);R=d(f,"FORM",{id:!0});var h=m(R);T=d(h,"H2",{class:!0});var v=m(T);A=u(v,"NEW PASSWORD"),v.forEach(i),I=l(h),O=d(h,"P",{});var w=m(O);N=u(w,"Enter your new password below"),w.forEach(i),W=l(h),L=d(h,"HR",{}),U=l(h),p(V.$$.fragment,h),B=l(h),p(C.$$.fragment,h),F=l(h),H=d(h,"P",{});var $=m(H);G=d($,"SMALL",{});var g=m(G);J=u(g,"Password minimum length 8, must have 1 capital letter, 1 number and 1 special\n\t\t\t\t\t\t\t\tcharacter"),g.forEach(i),$.forEach(i),q=l(h),z=d(h,"BUTTON",{class:!0,disabled:!0});var b=m(z);K=u(b,"Update Password"),b.forEach(i),h.forEach(i),f.forEach(i),n.forEach(i),o.forEach(i),r.forEach(i),this.h()},h(){D.title="Password Reset",f(s,"name","robots"),f(s,"content","noindex, nofollow"),f(T,"class","text-primary"),f(z,"class","btn btn-primary float-end"),z.disabled=Q=!a[4],f(R,"id","password-reset-form"),f(x,"class","card-body"),f(S,"class","card"),h(S,"max-width","50em"),f(j,"class","d-flex justify-content-center mt-5"),f(k,"class","container")},m(e,r){v(D.head,s),w(e,t,r),w(e,k,r),v(k,j),v(j,S),v(S,x),v(x,R),v(R,T),v(T,A),v(R,I),v(R,O),v(O,N),v(R,W),v(R,L),v(R,U),$(V,R,null),v(R,B),$(C,R,null),v(R,F),v(R,H),v(H,G),v(G,J),v(R,q),v(R,z),v(z,K),X=!0,Y||(Z=g(z,"click",b(a[5])),Y=!0)},p(a,[s]){const t={};4&s&&(t.valid=a[2]),1&s&&(t.value=a[0]),V.$set(t);const e={};8&s&&(e.valid=a[3]),2&s&&(e.value=a[1]),C.$set(e),(!X||16&s&&Q!==(Q=!a[4]))&&(z.disabled=Q)},i(a){X||(E(V.$$.fragment,a),E(C.$$.fragment,a),X=!0)},o(a){y(V.$$.fragment,a),y(C.$$.fragment,a),X=!1},d(a){i(s),a&&i(t),a&&i(k),P(V),P(C),Y=!1,Z()}}}function O(a,s,t){let e,r,o,n;k(a,T,(a=>t(9,n=a)));let c="",d="";return a.$$.update=()=>{1&a.$$.dirty&&t(2,e=R(c)),3&a.$$.dirty&&t(3,r=c===d),12&a.$$.dirty&&t(4,o=e&&r)},[c,d,e,r,o,async function(){const a=document.getElementById("password-reset-form"),s={password:c,passwordResetToken:n.params.token};try{const t=await S("POST","user/reset-password",s);if(t.status>=400)throw new Error(t.message);return x.success("Password updated successfully"),a.reset(),A("/login")}catch(t){x.warning(t.message)}},a=>t(0,c=a.target.value),a=>t(1,d=a.target.value)]}export default class extends a{constructor(a){super(),s(this,a,O,I,t,{})}}
